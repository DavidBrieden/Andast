(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var App = {};

App.init = function () {
    this.canvas = document.getElementById("canvas");
    this.canvas.width = 800;
    this.canvas.height = 600;
    this.ctx = this.canvas.getContext("2d");
};

module.exports = App;

},{}],2:[function(require,module,exports){
'use strict';

var App = require('./App.js');
var Field = require('./Field.js');
var Scoreboard = require('./Scoreboard.js');
var Boxes = require('./Boxes.js');

var BlockDisplay = {};

BlockDisplay.nextBlock = 3;

BlockDisplay.init = function () {
    this.offsety = 20;
    this.blocksize = 20;
    this.width = Scoreboard.width;
};

BlockDisplay.render = function () {
    //render display outline
    App.ctx.beginPath();
    App.ctx.lineWidth = "1";
    App.ctx.strokeStyle = "black";
    App.ctx.fillStyle = "black";

    var boardX = Field.offsetx + Field.width * Field.blocksize + Scoreboard.offsetx;
    var boardY = Field.offsety + Scoreboard.offsety + Scoreboard.height + this.offsety;

    App.ctx.rect(boardX, boardY, this.width, this.width);

    App.ctx.stroke();

    //render next block
    var box = Boxes[BlockDisplay.nextBlock];
    for (var i = 0; i < 4; i++) {
        App.ctx.beginPath();
        App.ctx.rect(boardX + this.width / 2 + box[i].x * this.blocksize, boardY + this.width / 2 + box[i].y * this.blocksize, BlockDisplay.blocksize, BlockDisplay.blocksize);
        App.ctx.stroke();
    }
};

module.exports = BlockDisplay;

},{"./App.js":1,"./Boxes.js":3,"./Field.js":4,"./Scoreboard.js":6}],3:[function(require,module,exports){
"use strict";

var boxes = [];

// X
//XXX
boxes.push([{ x: -1, y: 0 }, { x: 0, y: 0 }, { x: 1, y: 0 }, { x: 0, y: 1 }]);
//XX
// XX
boxes.push([{ x: -1, y: 1 }, { x: 0, y: 1 }, { x: 0, y: 0 }, { x: 1, y: 0 }]);
//XX
//XX
boxes.push([{ x: 0, y: 0 }, { x: 0, y: 1 }, { x: 1, y: 0 }, { x: 1, y: 1 }]);
//X
//X
//X
//X
boxes.push([{ x: 0, y: 0 }, { x: 0, y: 1 }, { x: 0, y: 2 }, { x: 0, y: -1 }]);
//X
//X
//XX
boxes.push([{ x: 0, y: 0 }, { x: 0, y: 1 }, { x: 0, y: -1 }, { x: -1, y: -1 }]);
// X
// X
//XX
boxes.push([{ x: 0, y: 0 }, { x: 0, y: 1 }, { x: 0, y: -1 }, { x: 1, y: -1 }]);
// XX
//XX
boxes.push([{ x: -1, y: 0 }, { x: 0, y: 0 }, { x: 0, y: 1 }, { x: 1, y: 1 }]);

module.exports = boxes;

},{}],4:[function(require,module,exports){
"use strict";

var App = require("./App.js");

var Field = {};

Field.init = function () {

    Field.offsetx = 20;
    Field.offsety = 20;
    Field.blocksize = 15;
    Field.width = 20;
    Field.height = 35;

    Field.field = [];
    for (var x = 0; x < Field.width; x++) {
        var column = [];
        for (var y = 0; y < Field.height; y++) {
            column.push({
                show: false,
                color: 0
            });
        }
        Field.field.push(column);
    }
};

Field.render = function () {
    for (var x = 0; x < Field.width; x++) {
        for (var y = 0; y < Field.height; y++) {
            if (Field.field[x][y].show == true) {
                App.ctx.beginPath();
                App.ctx.lineWidth = "3";
                App.ctx.strokeStyle = Field.field[x][y].color;
                App.ctx.fillStyle = "black";

                App.ctx.fillRect(x * Field.blocksize + Field.offsetx, (Field.height - 1) * Field.blocksize + Field.offsety - y * Field.blocksize, Field.blocksize, Field.blocksize);

                App.ctx.fillStyle = Field.field[x][y].color;

                App.ctx.fillRect(x * Field.blocksize + Field.offsetx + Field.blocksize / 10, (Field.height - 1) * Field.blocksize + Field.offsety - y * Field.blocksize + Field.blocksize / 10, Field.blocksize / 10 * 8, Field.blocksize / 10 * 8);

                App.ctx.stroke();
            }
        }
    }

    App.ctx.beginPath();
    App.ctx.lineWidth = "1";
    App.ctx.strokeStyle = "black";
    App.ctx.rect(Field.offsetx, Field.offsety, Field.width * Field.blocksize, Field.height * Field.blocksize);
    App.ctx.stroke();
};

module.exports = Field;

},{"./App.js":1}],5:[function(require,module,exports){
'use strict';

var Field = require('./Field.js');
var App = require('./App.js');
var Boxes = require('./Boxes.js');
var Scoreboard = require('./Scoreboard.js');
var BlockDisplay = require('./BlockDisplay.js');
var Game = {};

Game.speed = 1000;
Game.nextSpawn = Math.floor(Math.random() * Boxes.length);

Game.player = {};

Game.start = function () {
    setInterval(this.tick, 50);
    Game.interval = setInterval(function () {
        Game.movePlayer(0, -1);
    }, Game.speed);
    setInterval(function () {
        Game.setSpeed(Game.speed * 0.9);
    }, 10000);

    document.addEventListener("keydown", function (e) {
        if (e.keyCode == '40') {
            // down arrow
            Game.movePlayer(0, -1);
        } else if (e.keyCode == '37') {
            // left arrow
            Game.movePlayer(-1, 0);
        } else if (e.keyCode == '39') {
            // right arrow
            Game.movePlayer(1, 0);
        } else if (e.keyCode == '38') {
            // up arrow
            Game.spawn();
        } else if (e.keyCode == '32') {
            // press space to flip boxes

            // prevent scrolling
            e.preventDefault();
            Game.flip();
        }
    });
};

Game.setSpeed = function (speed) {
    window.clearInterval(Game.interval);
    Game.speed = speed;
    Game.interval = setInterval(function () {
        Game.movePlayer(0, -1);
    }, Game.speed);
};

Game.tick = function () {
    Game.update();
    Game.render();
};

Game.render = function () {
    App.ctx.clearRect(0, 0, App.canvas.width, App.canvas.height);
    Field.render();
    Scoreboard.render();
    BlockDisplay.render();
};

Game.update = function () {};

Game.spawn = function () {
    var spawnpoint = { x: Math.floor(Field.width / 2) - 1, y: Field.height - 3 };
    Game.player.position = spawnpoint;
    // eine zufällige Figur auswählen
    var index = Game.nextSpawn;
    Game.nextSpawn = Math.floor(Math.random() * Boxes.length);
    BlockDisplay.nextBlock = Game.nextSpawn;
    var figure = Array.from(Boxes[index]);
    Game.player.figure = figure;

    var r = Math.floor(Math.random() * 256);
    var g = Math.floor(Math.random() * 256);
    var b = Math.floor(Math.random() * 256);

    Game.player.color = 'rgb(' + r + ',' + g + ',' + b + ')';

    // Jede Koordinate der gewählten Figur iterieren
    for (var i = 0; i < 4; i++) {
        // Koordinate im Spielfeld setzen
        Field.field[spawnpoint.x - figure[i].x][spawnpoint.y - figure[i].y] = {
            show: true,
            color: Game.player.color
        };
    }
};

Game.testRow = function (y) {
    for (var i = 0; i < Field.width; i++) {
        if (Field.field[i][y].show == false) return false;
    }
    return true;
};

Game.deleteRow = function (y) {
    //delete full row
    for (var i = 0; i < Field.width; i++) {
        Field.field[i][y].show = false;
    }

    //move upper rows
    for (var i = y + 1; i < Field.height; i++) {
        for (var j = 0; j < Field.width; j++) {
            Field.field[j][i - 1] = Field.field[j][i];
        }
    }
};

Game.detectCollision = function (x, y) {
    for (var i = 0; i < 4; i++) {
        if (Game.player.position.x - Game.player.figure[i].x + x < 0 || Game.player.position.x - Game.player.figure[i].x + x >= Field.width) {
            //collision occurs during x axis movement
            return true;
        } else if (Game.player.position.y - Game.player.figure[i].y + y < 0) {
            //collision occurs during down movement
            return true;
        } else if (Field.field[Game.player.position.x - Game.player.figure[i].x + x][Game.player.position.y - Game.player.figure[i].y + y].show == true) {
            //collision with other block
            return true;
        }
    }
    return false;
};

Game.flip = function () {
    var flip = Array.from(Game.player.figure);
    for (var i = 0; i < 4; i++) {
        // Koordinate im Spielfeld setzen
        Field.field[Game.player.position.x - Game.player.figure[i].x][Game.player.position.y - Game.player.figure[i].y] = {
            show: false,
            color: "green"
        };
        Game.player.figure[i] = {
            x: 0 - flip[i].y,
            y: flip[i].x
        };
        /*if (Field.field[Game.player.position.x-x][Game.player.position.y - y].show==true){
            Game.player.figure = flip;
        }*/
    }
    if (Game.detectCollision(0, 0)) {
        Game.player.figure = Array.from(flip);
    }
    // damit das Spielfeld direkt geupdatet wird
    Game.movePlayer(0, 0);
};

Game.movePlayer = function (x, y) {

    var spawn = false;

    // Jede Koordinate der gewählten Figur iterieren
    for (var i = 0; i < 4; i++) {
        // Koordinate im Spielfeld setzen
        Field.field[Game.player.position.x - Game.player.figure[i].x][Game.player.position.y - Game.player.figure[i].y] = {
            show: false,
            color: "green"
        };
    }

    if (Game.detectCollision(x, y) == true) {
        if (x != 0) {
            x = 0;
        } else if (y != 0) {
            y = 0;
            spawn = true;
        }
    }

    Game.player.position.y += y;
    Game.player.position.x += x;
    // Jede Koordinate der gewählten Figur iterieren
    for (var i = 0; i < 4; i++) {
        // Koordinate im Spielfeld setzen
        Field.field[Game.player.position.x - Game.player.figure[i].x][Game.player.position.y - Game.player.figure[i].y] = {
            show: true,
            color: Game.player.color
        };
    }

    if (spawn == true) {
        //test if Row is full
        for (var i = 0; i < 4; i++) {
            if (Game.testRow(Game.player.position.y - Game.player.figure[i].y) == true) {
                Game.deleteRow(Game.player.position.y - Game.player.figure[i].y);
                Scoreboard.score += 100;
            }
        }
        spawn = false;
        Game.spawn();
    }
};

module.exports = Game;

},{"./App.js":1,"./BlockDisplay.js":2,"./Boxes.js":3,"./Field.js":4,"./Scoreboard.js":6}],6:[function(require,module,exports){
'use strict';

var App = require('./App.js');
var Field = require('./Field.js');

var Scoreboard = {};

Scoreboard.init = function () {
    this.offsetx = 20;
    this.offsety = 0;
    this.width = 170;
    this.height = 50;

    this.score = 0;

    this.fontsize = 30;
};

Scoreboard.render = function () {
    App.ctx.beginPath();
    App.ctx.lineWidth = "1";
    App.ctx.strokeStyle = "black";
    App.ctx.fillStyle = "black";

    var boardX = Field.offsetx + Field.width * Field.blocksize + this.offsetx;
    var boardY = Field.offsety + this.offsety;

    App.ctx.rect(boardX, boardY, this.width, this.height);

    App.ctx.font = this.fontsize + "px Comic Sans MS";
    App.ctx.textAlign = "center";
    App.ctx.textBaseline = "middle";
    App.ctx.fillText(this.score, boardX + this.width / 2, boardY + this.height / 2);

    App.ctx.stroke();
};

module.exports = Scoreboard;

},{"./App.js":1,"./Field.js":4}],7:[function(require,module,exports){
'use strict';

var Game = require('./Game.js');
var App = require('./App.js');
var Field = require('./Field.js');
var Scoreboard = require('./Scoreboard.js');
var BlockDisplay = require('./BlockDisplay.js');

App.init();
Field.init();
Scoreboard.init();
BlockDisplay.init();

Game.spawn();

Game.start();

},{"./App.js":1,"./BlockDisplay.js":2,"./Field.js":4,"./Game.js":5,"./Scoreboard.js":6}]},{},[7])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGNsaWVudFxcc2NyaXB0c1xcQXBwLmpzIiwic3JjXFxjbGllbnRcXHNjcmlwdHNcXEJsb2NrRGlzcGxheS5qcyIsInNyY1xcY2xpZW50XFxzY3JpcHRzXFxCb3hlcy5qcyIsInNyY1xcY2xpZW50XFxzY3JpcHRzXFxGaWVsZC5qcyIsInNyY1xcY2xpZW50XFxzY3JpcHRzXFxHYW1lLmpzIiwic3JjXFxjbGllbnRcXHNjcmlwdHNcXFNjb3JlYm9hcmQuanMiLCJzcmNcXGNsaWVudFxcc2NyaXB0c1xcbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBSSxNQUFNLEVBQVY7O0FBRUEsSUFBSSxJQUFKLEdBQVcsWUFBVTtBQUNqQixTQUFLLE1BQUwsR0FBYyxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBZDtBQUNBLFNBQUssTUFBTCxDQUFZLEtBQVosR0FBb0IsR0FBcEI7QUFDQSxTQUFLLE1BQUwsQ0FBWSxNQUFaLEdBQXFCLEdBQXJCO0FBQ0EsU0FBSyxHQUFMLEdBQVcsS0FBSyxNQUFMLENBQVksVUFBWixDQUF1QixJQUF2QixDQUFYO0FBQ0gsQ0FMRDs7QUFPQSxPQUFPLE9BQVAsR0FBaUIsR0FBakI7Ozs7O0FDVEEsSUFBSSxNQUFNLFFBQVEsVUFBUixDQUFWO0FBQ0EsSUFBSSxRQUFRLFFBQVEsWUFBUixDQUFaO0FBQ0EsSUFBSSxhQUFhLFFBQVEsaUJBQVIsQ0FBakI7QUFDQSxJQUFJLFFBQVEsUUFBUSxZQUFSLENBQVo7O0FBRUEsSUFBSSxlQUFlLEVBQW5COztBQUVBLGFBQWEsU0FBYixHQUF5QixDQUF6Qjs7QUFFQSxhQUFhLElBQWIsR0FBb0IsWUFBVTtBQUMxQixTQUFLLE9BQUwsR0FBZSxFQUFmO0FBQ0EsU0FBSyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsV0FBVyxLQUF4QjtBQUNILENBSkQ7O0FBTUEs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TUFKVDs7QUFPQSxRQUFJLEdBQUosQ0FBUSxJQUFSLEdBQWUsS0FBSyxRQUFMLEdBQWdCLGtCQUEvQjtBQUNBLFFBQUksR0FBSixDQUFRLFNBQVIsR0FBbUIsUUFBbkI7QUFDQSxRQUFJLEdBQUosQ0FBUSxZQUFSLEdBQXVCLFFBQXZCO0FBQ0EsUUFBSSxHQUFKLENBQVEsUUFBUixDQUNJLEtBQUssS0FEVCxFQUVJLFNBQVEsS0FBSyxLQUFMLEdBQVcsQ0FGdkIsRUFHSSxTQUFRLEtBQUssTUFBTCxHQUFZLENBSHhCOztBQU1BLFFBQUksR0FBSixDQUFRLE1BQVI7QUFDSCxDQTFCRDs7QUE0QkEsT0FBTyxPQUFQLEdBQWlCLFVBQWpCOzs7OztBQzVDQSxJQUFJLE9BQU8sUUFBUSxXQUFSLENBQVg7QUFDQSxJQUFJLE1BQU0sUUFBUSxVQUFSLENBQVY7QUFDQSxJQUFJLFFBQVEsUUFBUSxZQUFSLENBQVo7QUFDQSxJQUFJLGFBQWEsUUFBUSxpQkFBUixDQUFqQjtBQUNBLElBQUksZUFBZSxRQUFRLG1CQUFSLENBQW5COztBQUVBLElBQUksSUFBSjtBQUNBLE1BQU0sSUFBTjtBQUNBLFdBQVcsSUFBWDtBQUNBLGFBQWEsSUFBYjs7QUFFQSxLQUFLLEtBQUw7O0FBRUEsS0FBSyxLQUFMIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBBcHAgPSB7fTtcclxuXHJcbkFwcC5pbml0ID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIik7XHJcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IDgwMDtcclxuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IDYwMDtcclxuICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBcHA7IiwidmFyIEFwcCA9IHJlcXVpcmUoJy4vQXBwLmpzJyk7XHJcbnZhciBGaWVsZCA9IHJlcXVpcmUoJy4vRmllbGQuanMnKTtcclxudmFyIFNjb3JlYm9hcmQgPSByZXF1aXJlKCcuL1Njb3JlYm9hcmQuanMnKTtcclxudmFyIEJveGVzID0gcmVxdWlyZSgnLi9Cb3hlcy5qcycpO1xyXG5cclxudmFyIEJsb2NrRGlzcGxheSA9IHt9O1xyXG5cclxuQmxvY2tEaXNwbGF5Lm5leHRCbG9jayA9IDM7XHJcblxyXG5CbG9ja0Rpc3BsYXkuaW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB0aGlzLm9mZnNldHkgPSAyMDtcclxuICAgIHRoaXMuYmxvY2tzaXplID0gMjA7XHJcbiAgICB0aGlzLndpZHRoID0gU2NvcmVib2FyZC53aWR0aDtcclxufTtcclxuXHJcbkJsb2NrRGlzcGxheS5yZW5kZXIgPSBmdW5jdGlvbigpe1xyXG5cdC8vcmVuZGVyIGRpc3BsYXkgb3V0bGluZVxyXG4gICAgQXBwLmN0eC5iZWdpblBhdGgoKTtcclxuICAgIEFwcC5jdHgubGluZVdpZHRoPVwiMVwiO1xyXG4gICAgQXBwLmN0eC5zdHJva2VTdHlsZSA9IFwiYmxhY2tcIjtcclxuICAgIEFwcC5jdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgXHJcbiAgICB2YXIgYm9hcmRYID0gRmllbGQub2Zmc2V0eCArIChGaWVsZC53aWR0aCAqIEZpZWxkLmJsb2Nrc2l6ZSkgKyBTY29yZWJvYXJkLm9mZnNldHg7XHJcbiAgICB2YXIgYm9hcmRZID0gRmllbGQub2Zmc2V0eSArIFNjb3JlYm9hcmQub2Zmc2V0eSArIFNjb3JlYm9hcmQuaGVpZ2h0ICsgdGhpcy4gb2Zmc2V0eTtcclxuXHJcbiAgICBBcHAuY3R4LnJlY3QoXHJcbiAgICAgICAgYm9hcmRYLFxyXG4gICAgICAgIGJvYXJkWSxcclxuICAgICAgICB0aGlzLndpZHRoLFxyXG4gICAgICAgIHRoaXMud2lkdGhcclxuICAgICk7XHJcblxyXG4gICAgQXBwLmN0eC5zdHJva2UoKTtcclxuICAgIFxyXG4gICAgLy9yZW5kZXIgbmV4dCBibG9ja1xyXG4gICAgdmFyIGJveCA9IEJveGVzW0Jsb2NrRGlzcGxheS5uZXh0QmxvY2tdO1xyXG4gICAgZm9yICh2YXIgaT0wOyBpPDQ7aSsrKXtcclxuICAgICAgICBBcHAuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIEFwcC5jdHgucmVjdChcclxuICAgICAgICAgICAgYm9hcmRYICsgdGhpcy53aWR0aCAvIDIgKyBib3hbaV0ueCp0aGlzLmJsb2Nrc2l6ZSxcclxuICAgICAgICAgICAgYm9hcmRZICsgdGhpcy53aWR0aCAvIDIgKyBib3hbaV0ueSp0aGlzLmJsb2Nrc2l6ZSxcclxuICAgICAgICAgICAgQmxvY2tEaXNwbGF5LmJsb2Nrc2l6ZSxcclxuICAgICAgICAgICAgQmxvY2tEaXNwbGF5LmJsb2Nrc2l6ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgQXBwLmN0eC5zdHJva2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuXHJcblxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCbG9ja0Rpc3BsYXk7IiwidmFyIGJveGVzID0gW107XHJcblxyXG4vLyBYXHJcbi8vWFhYXHJcbmJveGVzLnB1c2goW3t4Oi0xLHk6MH0se3g6MCx5OjB9LHt4OjEseTowfSx7eDowLHk6MX1dKTtcclxuLy9YWFxyXG4vLyBYWFxyXG5ib3hlcy5wdXNoKFt7eDotMSx5OjF9LHt4OjAseToxfSx7eDowLHk6MH0se3g6MSx5OjB9XSk7XHJcbi8vWFhcclxuLy9YWFxyXG5ib3hlcy5wdXNoKFt7eDowLHk6MH0se3g6MCx5OjF9LHt4OjEseTowfSx7eDoxLHk6MX1dKTtcclxuLy9YXHJcbi8vWFxyXG4vL1hcclxuLy9YXHJcbmJveGVzLnB1c2goW3t4OjAseTowfSx7eDowLHk6MX0se3g6MCx5OjJ9LHt4OjAseTotMX1dKTtcclxuLy9YXHJcbi8vWFxyXG4vL1hYXHJcbmJveGVzLnB1c2goW3t4OjAseTowfSx7eDowLHk6MX0se3g6MCx5Oi0xfSx7eDotMSx5Oi0xfV0pO1xyXG4vLyBYXHJcbi8vIFhcclxuLy9YWFxyXG5ib3hlcy5wdXNoKFt7eDowLHk6MH0se3g6MCx5OjF9LHt4OjAseTotMX0se3g6MSx5Oi0xfV0pO1xyXG4vLyBYWFxyXG4vL1hYXHJcbmJveGVzLnB1c2goW3t4Oi0xLHk6MH0se3g6MCx5OjB9LHt4OjAseToxfSx7eDoxLHk6MX1dKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYm94ZXM7XHJcbiIsInZhciBBcHAgPSByZXF1aXJlKFwiLi9BcHAuanNcIik7XHJcblxyXG52YXIgRmllbGQgPSB7fTtcclxuXHJcbkZpZWxkLmluaXQgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgIEZpZWxkLm9mZnNldHggPSAyMDtcclxuICAgIEZpZWxkLm9mZnNldHkgPSAyMDtcclxuICAgIEZpZWxkLmJsb2Nrc2l6ZSA9IDE1O1xyXG4gICAgRmllbGQud2lkdGggPSAyMDtcclxuICAgIEZpZWxkLmhlaWdodCA9IDM1O1xyXG5cclxuICAgIEZpZWxkLmZpZWxkID0gW107XHJcbiAgICBmb3IodmFyIHg9MDt4PEZpZWxkLndpZHRoO3grKyl7XHJcbiAgICAgICAgdmFyIGNvbHVtbiA9IFtdO1xyXG4gICAgICAgIGZvcih2YXIgeT0wO3k8RmllbGQuaGVpZ2h0O3krKyl7XHJcbiAgICAgICAgICAgIGNvbHVtbi5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IDBcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEZpZWxkLmZpZWxkLnB1c2goY29sdW1uKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxufTtcclxuXHJcblxyXG5GaWVsZC5yZW5kZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgZm9yKHZhciB4PTA7eDxGaWVsZC53aWR0aDt4Kyspe1xyXG4gICAgICAgIGZvcih2YXIgeT0wO3k8RmllbGQuaGVpZ2h0O3krKyl7XHJcbiAgICAgICAgICAgIGlmIChGaWVsZC5maWVsZFt4XVt5XS5zaG93ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIEFwcC5jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICBBcHAuY3R4LmxpbmVXaWR0aD1cIjNcIjtcclxuICAgICAgICAgICAgICAgIEFwcC5jdHguc3Ryb2tlU3R5bGUgPSBGaWVsZC5maWVsZFt4XVt5XS5jb2xvcjtcclxuICAgICAgICAgICAgICAgIEFwcC5jdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG5cclxuICAgICAgICAgICAgICAgIEFwcC5jdHguZmlsbFJlY3QoXHJcbiAgICAgICAgICAgICAgICAgICAgeCpGaWVsZC5ibG9ja3NpemUrRmllbGQub2Zmc2V0eCxcclxuICAgICAgICAgICAgICAgICAgICAoKEZpZWxkLmhlaWdodC0xKSpGaWVsZC5ibG9ja3NpemUpK0ZpZWxkLm9mZnNldHktKHkqRmllbGQuYmxvY2tzaXplKSxcclxuICAgICAgICAgICAgICAgICAgICBGaWVsZC5ibG9ja3NpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgRmllbGQuYmxvY2tzaXplXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIEFwcC5jdHguZmlsbFN0eWxlID0gRmllbGQuZmllbGRbeF1beV0uY29sb3I7XHJcblxyXG4gICAgICAgICAgICAgICAgQXBwLmN0eC5maWxsUmVjdChcclxuICAgICAgICAgICAgICAgICAgICB4KkZpZWxkLmJsb2Nrc2l6ZStGaWVsZC5vZmZzZXR4K0ZpZWxkLmJsb2Nrc2l6ZS8xMCxcclxuICAgICAgICAgICAgICAgICAgICAoKEZpZWxkLmhlaWdodC0xKSpGaWVsZC5ibG9ja3NpemUpK0ZpZWxkLm9mZnNldHktKHkqRmllbGQuYmxvY2tzaXplKStGaWVsZC5ibG9ja3NpemUvMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgRmllbGQuYmxvY2tzaXplLzEwKjgsXHJcbiAgICAgICAgICAgICAgICAgICAgRmllbGQuYmxvY2tzaXplLzEwKjhcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgQXBwLmN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBBcHAuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgQXBwLmN0eC5saW5lV2lkdGg9XCIxXCI7XHJcbiAgICBBcHAuY3R4LnN0cm9rZVN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgQXBwLmN0eC5yZWN0KFxyXG4gICAgICAgIEZpZWxkLm9mZnNldHgsXHJcbiAgICAgICAgRmllbGQub2Zmc2V0eSxcclxuICAgICAgICBGaWVsZC53aWR0aCpGaWVsZC5ibG9ja3NpemUsXHJcbiAgICAgICAgRmllbGQuaGVpZ2h0ICogRmllbGQuYmxvY2tzaXplXHJcbiAgICApO1xyXG4gICAgQXBwLmN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBGaWVsZDsiLCJ2YXIgRmllbGQgPSByZXF1aXJlKCcuL0ZpZWxkLmpzJyk7XHJcbnZhciBBcHAgPSByZXF1aXJlKCcuL0FwcC5qcycpO1xyXG52YXIgQm94ZXMgPSByZXF1aXJlKCcuL0JveGVzLmpzJyk7XHJcbnZhciBTY29yZWJvYXJkID0gcmVxdWlyZSgnLi9TY29yZWJvYXJkLmpzJyk7XHJcbnZhciBCbG9ja0Rpc3BsYXkgPSByZXF1aXJlKCcuL0Jsb2NrRGlzcGxheS5qcycpO1xyXG52YXIgR2FtZSA9IHt9O1xyXG5cclxuR2FtZS5zcGVlZCA9IDEwMDA7XHJcbkdhbWUubmV4dFNwYXduID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKEJveGVzLmxlbmd0aCkpO1xyXG5cclxuR2FtZS5wbGF5ZXIgPSB7fTtcclxuXHJcbkdhbWUuc3RhcnQgPSBmdW5jdGlvbigpe1xyXG4gICAgc2V0SW50ZXJ2YWwodGhpcy50aWNrLCA1MCk7XHJcbiAgICBHYW1lLmludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtHYW1lLm1vdmVQbGF5ZXIoMCwtMSk7fSwgR2FtZS5zcGVlZCk7XHJcbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpe0dhbWUuc2V0U3BlZWQoR2FtZS5zcGVlZCowLjkpO30sMTAwMDApO1xyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT0gJzQwJykge1xyXG4gICAgICAgICAgICAvLyBkb3duIGFycm93XHJcbiAgICAgICAgICAgIEdhbWUubW92ZVBsYXllcigwLC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZS5rZXlDb2RlID09ICczNycpIHtcclxuICAgICAgICAgICAgLy8gbGVmdCBhcnJvd1xyXG4gICAgICAgICAgICBHYW1lLm1vdmVQbGF5ZXIoLTEsMCk7ICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGUua2V5Q29kZSA9PSAnMzknKSB7XHJcbiAgICAgICAgICAgIC8vIHJpZ2h0IGFycm93XHJcbiAgICAgICAgICAgIEdhbWUubW92ZVBsYXllcigxLDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChlLmtleUNvZGUgPT0gJzM4Jykge1xyXG4gICAgICAgICAgICAvLyB1cCBhcnJvd1xyXG4gICAgICAgICAgICBHYW1lLnNwYXduKCk7XHJcbiAgICAgICAgfWVsc2UgaWYgKGUua2V5Q29kZSA9PSAnMzInKSB7XHJcbiAgICAgICAgICAgIC8vIHByZXNzIHNwYWNlIHRvIGZsaXAgYm94ZXNcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIHByZXZlbnQgc2Nyb2xsaW5nXHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgR2FtZS5mbGlwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxuR2FtZS5zZXRTcGVlZCA9IGZ1bmN0aW9uKHNwZWVkKXtcclxuICAgIHdpbmRvdy5jbGVhckludGVydmFsKEdhbWUuaW50ZXJ2YWwpO1xyXG4gICAgR2FtZS5zcGVlZCA9IHNwZWVkO1xyXG4gICAgR2FtZS5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7R2FtZS5tb3ZlUGxheWVyKDAsLTEpO30sIEdhbWUuc3BlZWQpO1xyXG59XHJcblxyXG5HYW1lLnRpY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgR2FtZS51cGRhdGUoKTtcclxuICAgIEdhbWUucmVuZGVyKCk7XHJcbn07XHJcblxyXG5HYW1lLnJlbmRlciA9IGZ1bmN0aW9uKCl7XHJcbiAgICBBcHAuY3R4LmNsZWFyUmVjdCgwLCAwLCBBcHAuY2FudmFzLndpZHRoLCBBcHAuY2FudmFzLmhlaWdodCk7XHJcbiAgICBGaWVsZC5yZW5kZXIoKTtcclxuICAgIFNjb3JlYm9hcmQucmVuZGVyKCk7XHJcbiAgICBCbG9ja0Rpc3BsYXkucmVuZGVyKCk7XHJcbn07XHJcblxyXG5HYW1lLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XHJcblxyXG59O1xyXG5cclxuR2FtZS5zcGF3biA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc3Bhd25wb2ludCA9IHt4OiBNYXRoLmZsb29yKEZpZWxkLndpZHRoLzIpLTEseTpGaWVsZC5oZWlnaHQtM31cclxuICAgIEdhbWUucGxheWVyLnBvc2l0aW9uID0gc3Bhd25wb2ludDtcclxuICAgIC8vIGVpbmUgenVmw6RsbGlnZSBGaWd1ciBhdXN3w6RobGVuXHJcbiAgICB2YXIgaW5kZXggPSBHYW1lLm5leHRTcGF3bjtcclxuICAgIEdhbWUubmV4dFNwYXduID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKEJveGVzLmxlbmd0aCkpO1xyXG4gICAgQmxvY2tEaXNwbGF5Lm5leHRCbG9jayA9IEdhbWUubmV4dFNwYXduO1xyXG4gICAgdmFyIGZpZ3VyZSA9IEFycmF5LmZyb20oQm94ZXNbaW5kZXhdKTtcclxuICAgIEdhbWUucGxheWVyLmZpZ3VyZSA9IGZpZ3VyZTtcclxuXHJcbiAgICB2YXIgciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoyNTYpO1xyXG4gICAgdmFyIGcgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMjU2KTtcclxuICAgIHZhciBiID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjI1Nik7XHJcblxyXG4gICAgR2FtZS5wbGF5ZXIuY29sb3IgPSAncmdiKCcrcisnLCcrZysnLCcrYisnKSc7XHJcblxyXG4gICAgLy8gSmVkZSBLb29yZGluYXRlIGRlciBnZXfDpGhsdGVuIEZpZ3VyIGl0ZXJpZXJlblxyXG4gICAgZm9yICh2YXIgaT0wO2k8NDtpKyspe1xyXG4gICAgICAgIC8vIEtvb3JkaW5hdGUgaW0gU3BpZWxmZWxkIHNldHplblxyXG4gICAgICAgIEZpZWxkLmZpZWxkW3NwYXducG9pbnQueCAtIGZpZ3VyZVtpXS54XVtzcGF3bnBvaW50LnkgLSBmaWd1cmVbaV0ueV0gPSB7XHJcbiAgICAgICAgICAgIHNob3c6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbG9yOiBHYW1lLnBsYXllci5jb2xvclxyXG4gICAgICAgIH07XHJcbiAgICB9ICBcclxufTtcclxuXHJcbkdhbWUudGVzdFJvdyA9IGZ1bmN0aW9uKHkpe1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBGaWVsZC53aWR0aDsgaSsrKXtcclxuICAgICAgICBpZiAoRmllbGQuZmllbGRbaV1beV0uc2hvdyA9PSBmYWxzZSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG5cclxufTtcclxuXHJcbkdhbWUuZGVsZXRlUm93ID0gZnVuY3Rpb24oeSl7XHJcbiAgICAvL2RlbGV0ZSBmdWxsIHJvd1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBGaWVsZC53aWR0aDtpKyspe1xyXG4gICAgICAgIEZpZWxkLmZpZWxkW2ldW3ldLnNob3cgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvL21vdmUgdXBwZXIgcm93c1xyXG4gICAgZm9yICh2YXIgaSA9IHkrMTsgaTwgRmllbGQuaGVpZ2h0O2krKyl7XHJcbiAgICAgICAgZm9yKHZhciBqPTA7IGo8IEZpZWxkLndpZHRoO2orKyl7XHJcbiAgICAgICAgICAgIEZpZWxkLmZpZWxkW2pdW2ktMV09RmllbGQuZmllbGRbal1baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxuR2FtZS5kZXRlY3RDb2xsaXNpb24gPSBmdW5jdGlvbih4LHkpe1xyXG4gICAgZm9yICh2YXIgaT0wO2k8NDtpKyspe1xyXG4gICAgICAgIGlmIChHYW1lLnBsYXllci5wb3NpdGlvbi54IC0gR2FtZS5wbGF5ZXIuZmlndXJlW2ldLnggKyB4IDwgMCB8fCBHYW1lLnBsYXllci5wb3NpdGlvbi54IC0gR2FtZS5wbGF5ZXIuZmlndXJlW2ldLnggKyB4ID49IEZpZWxkLndpZHRoKXtcclxuICAgICAgICAgICAgLy9jb2xsaXNpb24gb2NjdXJzIGR1cmluZyB4IGF4aXMgbW92ZW1lbnRcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIGlmIChHYW1lLnBsYXllci5wb3NpdGlvbi55IC0gR2FtZS5wbGF5ZXIuZmlndXJlW2ldLnkgKyB5IDwgMCl7XHJcbiAgICAgICAgICAgIC8vY29sbGlzaW9uIG9jY3VycyBkdXJpbmcgZG93biBtb3ZlbWVudFxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2UgaWYgKCBGaWVsZC5maWVsZFtHYW1lLnBsYXllci5wb3NpdGlvbi54IC0gR2FtZS5wbGF5ZXIuZmlndXJlW2ldLngreF1bR2FtZS5wbGF5ZXIucG9zaXRpb24ueSAtIEdhbWUucGxheWVyLmZpZ3VyZVtpXS55K3ldLnNob3cgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIC8vY29sbGlzaW9uIHdpdGggb3RoZXIgYmxvY2tcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbkdhbWUuZmxpcCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgZmxpcCA9IEFycmF5LmZyb20oR2FtZS5wbGF5ZXIuZmlndXJlKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaT0wO2k8NDtpKyspe1xyXG4gICAgICAgICAgICAgICAgLy8gS29vcmRpbmF0ZSBpbSBTcGllbGZlbGQgc2V0emVuXHJcbiAgICAgICAgICAgICAgICBGaWVsZC5maWVsZFtHYW1lLnBsYXllci5wb3NpdGlvbi54IC0gR2FtZS5wbGF5ZXIuZmlndXJlW2ldLnhdW0dhbWUucGxheWVyLnBvc2l0aW9uLnkgLSBHYW1lLnBsYXllci5maWd1cmVbaV0ueV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiZ3JlZW5cIlxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIEdhbWUucGxheWVyLmZpZ3VyZVtpXT17XHJcbiAgICAgICAgICAgICAgICAgICAgeDowLWZsaXBbaV0ueSxcclxuICAgICAgICAgICAgICAgICAgICB5OmZsaXBbaV0ueFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIC8qaWYgKEZpZWxkLmZpZWxkW0dhbWUucGxheWVyLnBvc2l0aW9uLngteF1bR2FtZS5wbGF5ZXIucG9zaXRpb24ueSAtIHldLnNob3c9PXRydWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIEdhbWUucGxheWVyLmZpZ3VyZSA9IGZsaXA7XHJcbiAgICAgICAgICAgICAgICB9Ki9cclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgaWYgKEdhbWUuZGV0ZWN0Q29sbGlzaW9uKDAsMCkpe1xyXG4gICAgICAgICAgICAgICAgR2FtZS5wbGF5ZXIuZmlndXJlID0gQXJyYXkuZnJvbShmbGlwKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgLy8gZGFtaXQgZGFzIFNwaWVsZmVsZCBkaXJla3QgZ2V1cGRhdGV0IHdpcmRcclxuICAgICAgICAgICAgR2FtZS5tb3ZlUGxheWVyKDAsMCk7XHJcbn07XHJcblxyXG5HYW1lLm1vdmVQbGF5ZXIgPSBmdW5jdGlvbih4LHkpe1xyXG5cclxuICAgIHZhciBzcGF3biA9IGZhbHNlO1xyXG5cclxuICAgIFxyXG4gICAgLy8gSmVkZSBLb29yZGluYXRlIGRlciBnZXfDpGhsdGVuIEZpZ3VyIGl0ZXJpZXJlblxyXG4gICAgZm9yICh2YXIgaT0wO2k8NDtpKyspe1xyXG4gICAgICAgIC8vIEtvb3JkaW5hdGUgaW0gU3BpZWxmZWxkIHNldHplblxyXG4gICAgICAgIEZpZWxkLmZpZWxkW0dhbWUucGxheWVyLnBvc2l0aW9uLnggLSBHYW1lLnBsYXllci5maWd1cmVbaV0ueF1bR2FtZS5wbGF5ZXIucG9zaXRpb24ueSAtIEdhbWUucGxheWVyLmZpZ3VyZVtpXS55XSA9IHtcclxuICAgICAgICAgICAgc2hvdzogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbG9yOiBcImdyZWVuXCJcclxuICAgICAgICB9O1xyXG4gICAgfSAgXHJcblxyXG4gICAgaWYgKEdhbWUuZGV0ZWN0Q29sbGlzaW9uKHgseSkgPT0gdHJ1ZSl7XHJcbiAgICAgICAgaWYgKHghPTApe1xyXG4gICAgICAgICAgICB4PTA7XHJcbiAgICAgICAgfSBlbHNlIGlmICh5IT0wKXtcclxuICAgICAgICAgICAgeT0wO1xyXG4gICAgICAgICAgICBzcGF3biA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIEdhbWUucGxheWVyLnBvc2l0aW9uLnkrPXk7XHJcbiAgICBHYW1lLnBsYXllci5wb3NpdGlvbi54Kz14O1xyXG4gICAgLy8gSmVkZSBLb29yZGluYXRlIGRlciBnZXfDpGhsdGVuIEZpZ3VyIGl0ZXJpZXJlblxyXG4gICAgZm9yICh2YXIgaT0wO2k8NDtpKyspe1xyXG4gICAgICAgIC8vIEtvb3JkaW5hdGUgaW0gU3BpZWxmZWxkIHNldHplblxyXG4gICAgICAgIEZpZWxkLmZpZWxkW0dhbWUucGxheWVyLnBvc2l0aW9uLnggLSBHYW1lLnBsYXllci5maWd1cmVbaV0ueF1bR2FtZS5wbGF5ZXIucG9zaXRpb24ueSAtIEdhbWUucGxheWVyLmZpZ3VyZVtpXS55XSA9IHtcclxuICAgICAgICAgICAgc2hvdzogdHJ1ZSxcclxuICAgICAgICAgICAgY29sb3I6IEdhbWUucGxheWVyLmNvbG9yXHJcbiAgICAgICAgfTtcclxuICAgIH0gIFxyXG5cclxuICAgIGlmIChzcGF3biA9PSB0cnVlKXtcclxuICAgICAgICAvL3Rlc3QgaWYgUm93IGlzIGZ1bGxcclxuICAgICAgICBmb3IgKHZhciBpPTA7aTw0O2krKyl7XHJcbiAgICAgICAgICAgIGlmIChHYW1lLnRlc3RSb3coR2FtZS5wbGF5ZXIucG9zaXRpb24ueSAtIEdhbWUucGxheWVyLmZpZ3VyZVtpXS55KT09dHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBHYW1lLmRlbGV0ZVJvdyhHYW1lLnBsYXllci5wb3NpdGlvbi55IC0gR2FtZS5wbGF5ZXIuZmlndXJlW2ldLnkpO1xyXG4gICAgICAgICAgICAgICAgU2NvcmVib2FyZC5zY29yZSArPSAxMDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc3Bhd24gPSBmYWxzZTtcclxuICAgICAgICBHYW1lLnNwYXduKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7XHJcbiIsInZhciBBcHAgPSByZXF1aXJlKCcuL0FwcC5qcycpO1xyXG52YXIgRmllbGQgPSByZXF1aXJlKCcuL0ZpZWxkLmpzJyk7XHJcblxyXG52YXIgU2NvcmVib2FyZCA9IHt9O1xyXG5cclxuU2NvcmVib2FyZC5pbml0ID0gZnVuY3Rpb24oKXtcclxuICAgIHRoaXMub2Zmc2V0eCA9IDIwO1xyXG4gICAgdGhpcy5vZmZzZXR5ID0gMDtcclxuICAgIHRoaXMud2lkdGggPSAxNzA7XHJcbiAgICB0aGlzLmhlaWdodCA9IDUwO1xyXG5cclxuICAgIHRoaXMuc2NvcmUgPSAwO1xyXG5cclxuICAgIHRoaXMuZm9udHNpemUgPSAzMDtcclxufTtcclxuXHJcblNjb3JlYm9hcmQucmVuZGVyID0gZnVuY3Rpb24oKXtcclxuXHRBcHAuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgQXBwLmN0eC5saW5lV2lkdGg9XCIxXCI7XHJcbiAgICBBcHAuY3R4LnN0cm9rZVN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgQXBwLmN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XHJcblxyXG4gICAgdmFyIGJvYXJkWCA9IEZpZWxkLm9mZnNldHggKyAoRmllbGQud2lkdGggKiBGaWVsZC5ibG9ja3NpemUpICsgdGhpcy5vZmZzZXR4O1xyXG4gICAgdmFyIGJvYXJkWSA9IEZpZWxkLm9mZnNldHkgKyB0aGlzLm9mZnNldHk7XHJcblxyXG4gICAgQXBwLmN0eC5yZWN0KFxyXG4gICAgICAgIGJvYXJkWCxcclxuICAgICAgICBib2FyZFksXHJcbiAgICAgICAgdGhpcy53aWR0aCxcclxuICAgICAgICB0aGlzLmhlaWdodFxyXG4gICAgKTtcclxuXHJcbiAgICBBcHAuY3R4LmZvbnQgPSB0aGlzLmZvbnRzaXplICsgXCJweCBDb21pYyBTYW5zIE1TXCI7XHJcbiAgICBBcHAuY3R4LnRleHRBbGlnbiA9XCJjZW50ZXJcIjsgXHJcbiAgICBBcHAuY3R4LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCI7XHJcbiAgICBBcHAuY3R4LmZpbGxUZXh0KFxyXG4gICAgICAgIHRoaXMuc2NvcmUsXHJcbiAgICAgICAgYm9hcmRYKyh0aGlzLndpZHRoLzIpLFxyXG4gICAgICAgIGJvYXJkWSsodGhpcy5oZWlnaHQvMilcclxuICAgICk7XHJcblxyXG4gICAgQXBwLmN0eC5zdHJva2UoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2NvcmVib2FyZDsiLCJ2YXIgR2FtZSA9IHJlcXVpcmUoJy4vR2FtZS5qcycpO1xyXG52YXIgQXBwID0gcmVxdWlyZSgnLi9BcHAuanMnKTtcclxudmFyIEZpZWxkID0gcmVxdWlyZSgnLi9GaWVsZC5qcycpO1xyXG52YXIgU2NvcmVib2FyZCA9IHJlcXVpcmUoJy4vU2NvcmVib2FyZC5qcycpO1xyXG52YXIgQmxvY2tEaXNwbGF5ID0gcmVxdWlyZSgnLi9CbG9ja0Rpc3BsYXkuanMnKTtcclxuXHJcbkFwcC5pbml0KCk7XHJcbkZpZWxkLmluaXQoKTtcclxuU2NvcmVib2FyZC5pbml0KCk7XHJcbkJsb2NrRGlzcGxheS5pbml0KCk7XHJcblxyXG5HYW1lLnNwYXduKCk7XHJcblxyXG5HYW1lLnN0YXJ0KCk7Il19
